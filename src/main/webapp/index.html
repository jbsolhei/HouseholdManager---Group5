<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="js/jquery.min.js"></script>
        <script>
            if (window.localStorage.getItem("sessionToken")==undefined||window.localStorage.getItem("sessionToken")==""){
                window.localStorage.clear();
                window.location.replace("OpeningPage.html")
            } else {
                $.ajax({
                    url: "res/user/checkSession",
                    headers: {
                        Authorization: "Bearer " + window.localStorage.getItem("sessionToken")
                    },
                    type: "GET",
                    error: function (e) {
                        if (e.status == 401) {
                            window.localStorage.clear();
                            window.location.replace("OpeningPage.html")
                        }
                    }
                });
            }
        </script>
        <!--
                  :::::::
                 +++++++::
                +++++++::::
               +++++++::::::
              +++++++ :::::::
             +++++++   :::::::
            +++++++     ::::'::
           +++++++       ::'':::
          '++++++         ''':::.
           '++++++       ''''::.
        ,.  '++++++     ''''':.  ;;
       ,,,.  '++++++   ''''''.  ;;;;
      ,,,,,.  '++++++ '''''',  ;;;;;;
     ,::::::.  +++++++''''',  ;;;;;;;;
    ,,,::::::.  +++++++''',  ;;;;;;;;;;
   ,,,,,::::::.  +++++++',  ;;;;;;;;;;;;
  ,,,,,,,::::::.  ;''''',  ;;;;;;;;;;;;;;
 ,,,,,,,  ::::::.  ;''',  ;;;;;;;  ;;;;;;;
 ;,,,,,    :::::;.  ;',  ;;;;;;;    ;;;;;;
 ;;,,,      :::;;:.  ,  ;;;;;;;      ;;;;;
 ;;;,        :;;;::    ;;;;;;;        ;;;;
 ;;;;        ;;;;::,   :;;;;;;        :;;;
 ;;;;;      ;;;;;:,     :;;;;;;      :::;;
 ;;;;;;    ;;;;;;,       :;;;;;;    :::::;
 ;;;;;;;  ;;;;;;:         :;;;;;;  ::::::,
  ;;;;;;;;;;;;;:           :;;;;;;::::::,
   ;;;;;;;;;;;:             :;;;;;;::::,
    ;;;;;;;;;:               :;;;;;;::,
     ;;;;;;;:                 :;;;;;;,
      ;;;;;:                   ,::::,
       ;;;:                     ,::,
        ;:                       ,,


        -->
       <link rel='shortcut icon' type='image/x-icon' href='img/favico.ico' />
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>HHManager</title>

        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/sidebar.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
        <link href="css/shoppinglist.css" rel="stylesheet">
        <link href="css/shoppingTrip.css" rel="stylesheet">
        <link href="css/widgetStyle.css" rel="stylesheet">
        <link href="css/stats.css" rel="stylesheet">
        <link href="css/scrollBar.css" rel="stylesheet">
        <link href="css/notification.css" rel="stylesheet">
        <link href="css/household.css" rel="stylesheet">
        <link href="css/chore.css" rel="stylesheet">

        <script src="js/he.js"></script>
        <script src="js/jquery.min.js"></script>
        <script src="js/jquery-ui.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/bootstrap-confirmation.min.js"></script>
        <script src="js/addHousehold.js"></script>
        <script src="js/addMembersToHouseholdModal.js"></script>
        <script src="js/index.js"></script>
        <script src="js/dashboard.js"></script>
        <script src="js/shopping_list.js"></script>
        <!--
        <script src="js/shoppinglist.js"></script>
        -->
        <script src="js/profile.js"></script>
        <script src="js/household.js"></script>
        <script src="js/shoppingTrip.js"></script>
        <script src="js/addShoppingTrip.js"></script>
        <script src="js/chores.js"></script>
        <script src="js/stats.js"></script>
        <script src="js/notification.js"></script>
        <script src="js/stats.js"></script>
        <script src="js/finance.js"></script>

    </head>
    <body>
    <div class="top-and-sidebar">
        <!-- top bar -->
        <!-- pc -->
        <nav class="navbar navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <div>
                        <a id="sideBarBrandId" class="navbar-brand">
                            <span id="expandSidebarButtonId" style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;</span>
                        </a>

                        <a id="homePageId" onclick="swapContent(dashboard)">
                            Home
                        </a>

                    </div>
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mobileNavbar">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>
                <div class="navbar-collapse collapse" id="mobileNavbar">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a class="visible-xs" onclick="swapContent(dashboard)">Dashboard</a></li>
                        <li><a class="visible-xs" onclick="swapContent(household)">Household</a></li>
                        <li><a class="visible-xs" onclick="swapContent(shoppinglists)">Shopping lists</a></li>
                        <li><a class="visible-xs" onclick="swapContent(shoppingtrips)">Shopping trip</a></li>
                        <li><a class="visible-xs" onclick="swapContent(chores)">Chores</a></li>
                        <li><a class="visible-xs" onclick="swapContent(statistics)">Statistics</a></li>
                        <li><a class="visible-xs" onclick="swapContent(news)">News</a></li>

                        <li class="dropdown-toggle" id="dropdownBell">
                            <a id="notifyBellId" class="dropdown-toggle">
                                <i class="glyphicon glyphicon-bell"></i>
                                <div class="numberCircle" id="notificationValue"></div>
                            </a>

                            <div class="panel panel-default dropdown-menu">
                                <div class="panel-body" style="padding-left: 0px; padding-right: 0px;">
                                    <ul id="notifyDropdownListId" class="noti list-group" role="menu" aria-labelledby="menu1">
                                    </ul>
                                </div>
                                <div class="panel-footer">
                                    <button id="removeAllNotificationsButton"type="button" class="btn btn-default" style="width: 100%" data-dismiss="modal">Remove all</button>
                                </div>
                            </div>
                        </li>
                        <li class="dropdown">
                            <a id="currentHouseholdId" class="dropdown-toggle" data-toggle="dropdown" href="#">Current household
                                <span class="caret"></span>
                            </a>
                            <ul id="listOfHouseholds" class="dropdown-menu">
                                <li style="border-top: 1px solid #e8e8e8; padding-top: 4px; padding-bottom:4px;" data-toggle="modal" onclick='callModal("modals/addMemberHousehold.html")' data-target="#theModal"> <a href="#"><strong>Invite user   <span style="float:right;" class="glyphicon glyphicon-plus"></span></strong></a></li>
                                <li style="border-top: 1px solid #e8e8e8;" data-toggle="modal" onclick='callModal("modals/addHousehold.html")' data-target="#theModal"> <a href="#"><strong>New Household   <span class="glyphicon glyphicon-plus"></span></strong></a></li>
                            </ul>
                        </li>
                        <li><a id="myPageId" onclick="swapContent(profile)">My Page</a></li>
                        <li><a id="logoutId" onclick="logout()">Logout</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- navbar end -->
        <!-- sidebar -->
        <nav id="sideBarId" class="sidebar hidden-xs">
            <ul class="list-unstyled components">
                <li><a onclick="swapContent(dashboard); closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon-th-large"></i>  Dashboard</a></li>
                <li><a onclick="swapContent(profile);closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon-user"></i>My Page</a></li>
                <li><a onclick="swapContent(household); closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon-home"></i>  Household</a></li>
                <li><a onclick="swapContent(shoppinglists); closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon-list-alt"></i>  Shopping lists</a></li>
                <li><a onclick="swapContent(shoppingtrips); closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon-shopping-cart"></i>  Shopping trip</a></li>
                <li><a onclick="swapContent(chores);closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon glyphicon-check"></i>  Chores</a></li>
                <li><a onclick="swapContent(finance); closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon-credit-card"></i>  Finance</a></li>
                <li><a onclick="swapContent(stats); closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon-stats"></i>  Statistics</a></li>
                <li><a onclick="swapContent(news); closeNav()" class="btn btn-default btn-sidebar"><i class="glyphicon glyphicon-comment"></i>  News</a></li>
                <li><a class="navbar-brand" onclick="swapContent(dashboard)"><img src="https://i.imgur.com/KHVOzlt.png" style="width: 50%; display:inline-block;" alt="logo"></a></li>
            </ul>
        </nav>
    </div>
    <div class="page-wrapper"> <!-- Innholdet her byttes ut med js for hver side -->
        <!-- innhold -->
        <!-- /innhold -->
    </div>
    <!-- Denne må være her, trengs aldri å endres -->
    <div class="modal fade text-center" id="theModal">
        <div class="modal-dialog">
            <div class="modal-content" id="modal">
            </div>
        </div>
    </div>
    </body>
    <script>
        var sideBarOpen = false;

        $(function() {
            setInterval(checkSession, 20000);
            swapContent(dashboard);
        });

        function openNav() {
            sideBarOpen = true;
            $("#sideBarId").css('width', '250px');
            $(".page-wrapper").css('margin-left', '250px');
            $("#sideBarBrandId").html('<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>');
        }

        function closeNav() {
            sideBarOpen = false;
            $("#sideBarId").css('width', '0px');
            $(".page-wrapper").css('margin-left', '0px');
            $("#sideBarBrandId").html('<span id="expandSidebarButtonId" style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776;</span>');
        }

        $(document).mouseup(function () {
            if (sideBarOpen) closeNav();
        });

        $(document).ready(function(){
            $('[data-toggle="popover"]').popover();
        });

        getNotifications(getCurrentUser().userId);
        updateNotificationBell();
    </script>

    <style>
        .loader {
            border: 1.6vh solid #f3f3f3;
            border-radius: 50%;
            border-top: 1.6vh solid #3498db;
            width: 12.0vh;
            height: 12.0vh;
            -webkit-animation: spin 2s linear infinite; /* Safari */
            animation: spin 2s linear infinite;
        }

        /* Safari */
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #coverScreen {
            left: 0px;
            top: 0px;
            position: absolute;
            height: 100%;
            width: 100%;
            z-index: 999999999999999;
            background-color: rgba(0,0,0,0.2);
        }

        #centerDiv {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .numberCircle {
            position: absolute;
            float: right;
            right: 4px;
            top: 4px;

            width: 18px;
            height: 18px;
            padding: 0px;
            border-radius: 50%;

            background: #ff4d4d;
            border: 2px solid #ff4d4d;
            color: #ffffff;
            text-align: center;

            font: 12px Arial, sans-serif;
        }


    </style>

    <div id="coverScreen">
        <div id="centerDiv">
            <div class="loader"></div>
        </div>
    </div>
</html>